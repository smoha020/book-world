---
  - name: install mysql maven git
    hosts: testgroup
    tasks:
      - name: Upgrade all packages on the slave
        apt: upgrade=yes
        become: yes

      - name: Install the latest versions of each component
        apt:
          name:
            - git
            - mysql-server
            - maven
          state: latest
        become: yes

      - name: Check that mysql is enabled and running
        service:
          name: mysql
          enabled: true
          state: started
        become: yes

      - name: Clone a github repository
        git:
          repo: https://github.com/smoha020/book-world.git
          dest: /home/ubuntu/repos/
          clone: yes
          update: yes
        become: yes

      - name: Prepare jar file
        shell: |
          cd /home/ubuntu/repos/demo/ && mvn clean install
          cd /home/ubuntu/repos/demo/target && java -jar demo-0.0.1-SNAPSHOT.jar

